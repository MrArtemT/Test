# Конвертер изображений в Брайль для OpenOS

В репо лежат:

- `braille_converter.py` — Python-CLI: масштабирует картинку под сетку Брайля, подбирает 2 цвета на ячейку, по желанию (вручную) дизерит и сохраняет Lua-таблицу (`w`, `h`, `chars`, `fg`, `bg`).
- `display_braille.lua` — просмотрщик для OpenOS: читает таблицу, центрирует и выводит на экран через GPU.

## Требования

- Python 3.9+ и установленный [Pillow](https://pillow.readthedocs.io/) (`pip install pillow`).
- Исходное изображение (например, `imput_2.png`).

## Как конвертировать (пример с `imput_2.png`)

1. Один раз поставить Pillow:
   ```bash
   python -m pip install pillow
   ```

2. Запустить конвертер. Для стандартного экрана OpenOS 80x25:
   ```bash
   python braille_converter.py "C:\\Users\\vreme\\Downloads\\imput_2.png" output_braille.lua --chars-width 80 --chars-height 25
   ```

   Примечания:
   - Пути в Windows нужно брать в кавычки и экранировать обратные слэши, как в примере.
   - Если экран в игре больше — подставьте свою ширину/высоту символов (например, `160 50` для т3 монитора 160x50).
   - Дизеринг по умолчанию **выключен** для чистой картинки без «вопросиков». Если нужна детализация — включите его флагом `--dither`.
   - Параметры очистки шума: `--min-contrast` (сколько должны отличаться фон/текст, иначе ячейка заливается одним цветом), `--min-dots` (минимум точек в ячейке), `--min-neighbors` (сколько соседних ячеек с точками нужно, чтобы считать пятно не шумом).

3. Скопируйте `output_braille.lua` и `display_braille.lua` на компьютер OpenOS.

4. В OpenOS показать изображение:
   ```lua
   lua display_braille.lua /home/output_braille.lua
   ```

   Скрипт очистит терминал, отцентрирует картинку и уменьшит её, если экран меньше подготовленного размера.
   Для правильных символов Брайля используются функции `unicode.*` из OpenOS,
   поэтому знак вопроса вместо точек больше не появляется.

## Советы

- Леттербокс: изображение центрируется без искажений, пустое место заливается чёрным.
- Цвет: в ячейке максимум два цвета (фон/текст). Дизеринг можно включить вручную флагом `--dither`, если нужно больше деталей.
- Чистка «вопросиков»: если фон и текст почти одинаковые или в ячейке слишком мало точек/соседей, она превращается в однотонную заливку. Настраивается `--min-contrast` (по умолчанию 18), `--min-dots` (по умолчанию 3), `--min-neighbors` (по умолчанию 3).
- Lua-файл сохраняет цвета десятичными числами и символы Брайля в UTF-8, поэтому `dofile` работает даже на старых сборках OpenOS.
- Для пачки файлов запускайте конвертер для каждого изображения, указывая свой выходной путь.
